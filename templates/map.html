{% extends "navbar.html" %}
<!--Container principal-->
{% block gmaps %}

    <script src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script>	
        var puntos = []; 
        var map;
        function init_map() {
            var var_location = new google.maps.LatLng(37.386471, -5.985510);

            var var_mapoptions = {
                center: var_location,
                zoom: 15
            };

            map = new google.maps.Map(document.getElementById("map-container"),
                    var_mapoptions);

            google.maps.event.addListener(map, 'click', function(event) {
                placeMarker(event.latLng);
            })
        }

        google.maps.event.addDomListener(window, 'load', init_map);
    
        function toCoords(location) {
            return [ location.k, location.D ];
        }

        function placeMarker(location) {
            var marker = new google.maps.Marker({
                position: location,
                map: map,
                title : "Inicio",
                atributodemierda : 0
            });
            puntos.push(toCoords(location));
            console.log(puntos);
        }




    </script>


{% endblock %}

{% block content %}
    <div class="container">
    <div id="info-inicio" class=""> </div>

    <div class="row">

      <div id="map-outer" class="col-md-12">

          <div class="col-md-4">
          <div class="panel panel-default">

              <div class="panel-heading"> Introduce tus preferencias </div>
              <div class="panel-body"> 

                  <p> Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus in dapibus nibh. Praesent fermentum justo nec mauris fringilla laoreet. Sed pulvinar tellus in lacus bibendum, id molestie leo ultricies. Donec ultricies elit at tempor gravida. Ut sit amet neque at turpis aliquet laoreet quis a tellus. Mauris tristique tortor vel posuere volutpat. Ut condimentum, risus vel mollis tincidunt, dolor justo congue justo, vel egestas urna leo vel leo. Pellentesque a ligula eu augue scelerisque tincidunt. Praesent sit amet lacus finibus, imperdiet ipsum sed, malesuada turpis. Sed gravida scelerisque mi, at lobortis metus lobortis id. Integer posuere ex non velit blandit vehicula. Sed eu lobortis quam. Sed feugiat velit vitae diam molestie convallis. Morbi fermentum quam erat, tristique mollis mauris aliquet nec. Quisque consequat rhoncus dolor et venenatis </p>
                <!--Formulario de preferencias de ruta-->

              </div>
          </div></div>

          <div class="col-md-8">
          <div class="panel panel-default">
            <div class="panel-heading"> Mapa </div>
            <div class="panel-body"> 
                <div id="map-container" ></div>
                <form action="/iniciarRuta" method="post">
                    <input type="hidden" id="puntos" name="puntos" value="" />
                    <input type="hidden" id="tipos" name="tipos" value="" />
                    <input type="submit" id="btn" name="crear" value="Crear" / >
                </form>  

                    <script>
                        $(document).ready(function(){
                            $('#btn').click(function(){
                                $('#puntos').val(JSON.stringify(puntos));
                            });
                        });
                    </script>

            </div>
            </div>

          </div>

      </div><!-- /map-outer -->


    </div> <!-- /row -->
</div><!-- /container -->    
{% endblock %}
